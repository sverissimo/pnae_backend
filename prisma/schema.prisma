generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Produtor {
  id             Int           @id
  tipoPessoa     TipoPessoa    @map("tipo_pessoa")
  nome           String
  cpfCnpj        String?       @unique @map("nr_cpf_cnpj")
  dataNascimento DateTime?     @map("data_nascimento")
  sexo           Sexo?
  propriedades   Propriedade[]
}

model Relatorio {
  id              Int           @id @default(autoincrement())
  numeroRelatorio Int           @map("nr_relatorio")
  assunto         String
  orientacao      String
  perfilId        Int?          @map("perfil_id")
  files           PictureFile[]
  createdAt       DateTime?     @default(now()) @map("created_at")
}

model PictureFile {
  id          String             @id @default(uuid())
  fileName    String
  size        Float
  mimeType    String
  description PictureDescription
  relatorio   Relatorio?         @relation(fields: [relatorioId], references: [id])
  relatorioId Int                @map("relatorio_id")
  updloadDate DateTime?          @default(now()) @map("upload_date")
}

model Propriedade {
  id          Int      @id @default(autoincrement())
  nome        String
  municipio   String
  area        String
  coordenadas String
  produtor    Produtor @relation(fields: [produtorId], references: [id])
  produtorId  Int      @map("produtor_id")
}

model Tecnico {
  id   Int    @id @default(autoincrement())
  nome String
  cpf  String
  masp String
}

enum TipoPessoa {
  FISICA
  JURIDICA
}

enum PictureDescription {
  FOTO_RELATORIO
  ASSINATURA_PRODUTOR
}

enum Sexo {
  MASCULINO
  FEMININO
  NAO_INFORMADO
}
