generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Visita {
  id            Int           @id @default(autoincrement())
  propriedade   Propriedade?  @relation(fields: [propriedadeId], references: [id])
  propriedadeId Int           @map("propriedade_id")
  orientacao    String
  files         PictureFile[]
  createdAt     DateTime?     @default(now()) @map("created_at")
}

model PictureFile {
  id          String             @id @default(uuid())
  fileName    String
  size        Float
  mimeType    String
  description PictureDescription
  visita      Visita?            @relation(fields: [visitaId], references: [id])
  visitaId    Int                @map("visita_id")
  updloadDate DateTime?          @default(now()) @map("upload_date")
}

model Propriedade {
  id             Int          @id @default(autoincrement())
  nome           String
  municipio      String
  area           String
  coordenadas    String
  proprietario   Proprietario @relation(fields: [proprietarioId], references: [id])
  proprietarioId Int          @map("proprietario_id")
  visita         Visita[]
}

model Proprietario {
  id             Int           @id @default(autoincrement())
  tipoPessoa     TipoPessoa    @map("tipo_pessoa")
  nome           String
  cpf            String?       @unique
  cnpj           String?       @unique
  dataNascimento DateTime?     @map("data_nascimento")
  sexo           Sexo?
  propriedades   Propriedade[]
}

model Tecnico {
  id   Int    @id @default(autoincrement())
  nome String
  cpf  String
  masp String
}

enum TipoPessoa {
  FISICA
  JURIDICA
}

enum PictureDescription {
  FOTO_VISITA
  ASSINATURA_PROPRIETARIO
}

enum Sexo {
  MASCULINO
  FEMININO
  NAO_INFORMADO
}
